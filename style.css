:root {
    --bg-gray: #f2f2f2;
    --border-gray: #ccc;
    --text-black: #333;
    --highlight-blue: #4a90e2;
    --hp-red: #e74c3c;
    --hunger-yellow: #f1c40f;
    --water-blue: #3498db;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Microsoft YaHei', sans-serif;
    background-color: #333; /* 外部背景深色 */
    height: 100vh;
    display: flex;
    justify-content: center;
}

.app-container {
    width: 100%;
    max-width: 420px;
    height: 100%;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    position: relative;
}

/* 顶部信息 */
.top-bar { padding: 5px 10px; font-size: 12px; border-bottom: 1px solid #eee; }
.loc-info { display: flex; justify-content: space-between; font-weight: bold; font-size: 14px; margin-bottom: 4px; }
.mini-map-btn { background: #3498db; color: white; padding: 2px 5px; font-size: 10px; border-radius: 2px; }
.time-info { text-align: center; margin-bottom: 5px; color: #555; }

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 4px;
    font-size: 11px;
    color: #333;
}
.stat-hp { color: var(--hp-red); }
.stat-hunger { color: #d3a900; }
.stat-water { color: var(--water-blue); }

/* 季节栏 */
.season-bar { display: flex; height: 36px; border-top: 1px solid #ccc; border-bottom: 1px solid #ccc; }
.season-box { width: 40px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold; border-right: 1px solid #ccc; }
.weather-box { flex: 1; background: #6fa8dc; color: white; display: flex; align-items: center; justify-content: center; font-size: 20px; }

/* 存活栏 */
.survive-bar { display: flex; border-bottom: 1px solid #ccc; padding: 5px; font-size: 11px; color: #3498db; }
.survive-bar span { flex: 1; text-align: center; border-right: 1px solid #eee; }

/* 筛选栏 */
.filter-bar { padding: 5px 10px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
.small-btn { font-size: 10px; padding: 2px 5px; background: white; border: 1px solid #999; }
.checkboxes label { font-size: 12px; margin-left: 5px; font-weight: bold; }
.checkboxes input { vertical-align: middle; }

/* --- 核心区域：模仿截图的格子列表 --- */
.content-area {
    flex: 1;
    background: #f9f9f9;
    padding: 10px;
    overflow-y: auto;
}

.item-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-content: flex-start;
}

.grid-btn {
    background: #fff;
    border: 1px solid #ccc;
    padding: 8px 12px;
    font-size: 13px;
    border-radius: 4px;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    cursor: pointer;
    white-space: nowrap;
}
.grid-btn:active { background: #eee; }
/* 怪物名字设为红色，模仿截图 */
.grid-btn.mob { color: #c0392b; border-color: #e6b0aa; }
.grid-btn.res { color: #333; }

/* 日志区 */
.log-area {
    height: 120px;
    border-top: 1px solid #ccc;
    padding: 5px 10px;
    font-size: 12px;
    color: #333;
    overflow-y: auto;
    background: #fff;
    line-height: 1.5;
}
.log-area p { margin: 2px 0; }

/* --- 控制面板 (关键：模仿截图底部) --- */
.control-panel {
    height: 100px;
    border-top: 1px solid #ccc;
    display: flex;
    background: #fff;
}

/* 左侧十字地图 */
.d-pad-map {
    width: 100px; /* 左侧宽度 */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    padding: 5px;
    gap: 2px;
    border-right: 1px solid #eee;
}

.d-cell {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 10px;
    color: #999;
}
.d-cell.dir-btn {
    border: 1px solid #eee;
    color: #d35400; /* 土黄色字 */
    cursor: pointer;
}
.d-cell.current-loc {
    background: #8bc34a; /* 绿色背景 */
    color: white;
    font-weight: bold;
}
.d-cell.empty { background: transparent; }

/* 右侧按钮 */
.action-buttons {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-around;
    padding: 0 10px;
}
.func-btn {
    background: #fff;
    border: 1px solid #ccc;
    padding: 6px 12px;
    font-size: 12px;
    color: #333;
    border-radius: 2px;
}
.func-btn.active {
    border: 1px solid #3498db;
    color: #3498db;
}

/* 底部导航 */
.bottom-nav {
    height: 45px;
    background: #fdfdfd;
    border-top: 1px solid #ccc;
    display: flex;
}
.nav-item {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 12px;
    color: #333;
    border-right: 1px solid #eee;
    cursor: pointer;
}
.nav-item.active {
    background: #3498db;
    color: white;
}

/* --- 地形颜色定义（如果原始文件中没有） --- */
/* 如果原始文件已有，请忽略此段 */
:root {
    /* 假设地图使用的颜色，保持一致性 */
    --color-plains: #7cfc00;
    --color-forest: #228b22;
    --color-desert: #f4a460;
    --color-mountain: #808080;
    --color-gobi: #d2b48c;
    /* 新增其他地形颜色（模仿 1000024821.jpg） */
    --color-river: #6ab0e5;
    --color-lake: #4a90e2;
    --color-swamp: #8c8f43; 
}


/* --- 地图弹窗样式 (模仿截图 1000024819.jpg) --- */
.modal {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    /* 使用白色背景，而非半透明，更接近截图 */
    background: #ffffff; 
    z-index: 999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.modal.hidden { display: none; }

.modal-content {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
}

.modal-header {
    padding: 15px;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    color: #333;
    /* 模仿截图的“关闭地图”文字 */
}

.big-map-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #f0f0f0; /* 背景微灰 */
    overflow: auto;
}

.big-grid {
    display: grid;
    /* 9x9 视野 */
    grid-template-columns: repeat(9, 36px);
    grid-template-rows: repeat(9, 36px);
    gap: 1px;
    border: 1px solid #ddd;
    background: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.map-cell {
    width: 36px; height: 36px;
    display: flex; justify-content: center; align-items: center;
    font-size: 11px;
    color: #333; 
    font-weight: bold;
    border: 1px solid #eee; /* 格子内线 */
}

/* 玩家位置和迷雾 */
.map-cell.player { 
    border: 2px solid red; 
    background: #8bc34a !important; /* 绿色，模仿截图 1000024819.jpg */
    color: white;
}
.map-cell.fog { 
    background-color: #eee !important; /* 迷雾/未探索区域 */
    color: transparent; 
}

/* --- 基础配置 --- */
/* ... 之前的代码 ... */

/* --- Minecraft 地形文字颜色 --- */
.map-cell.bg-PLAINS { color: #7cfc00; }
.map-cell.bg-FOREST { color: #228b22; }
.map-cell.bg-DESERT { color: #f4a460; }
.map-cell.bg-MOUNTAIN { color: #808080; }
.map-cell.bg-GOBI { color: #d2b48c; }
/* 新增 */
.map-cell.bg-SNOWY { color: #87CEEB; }  /* 雪原：天蓝 */
.map-cell.bg-SWAMP { color: #556B2F; }  /* 沼泽：暗绿 */
.map-cell.bg-OCEAN { color: #0000CD; }  /* 海洋：中蓝 */
.map-cell.bg-MESA { color: #B22222; }   /* 恶地：砖红 */
.map-cell.bg-JUNGLE { color: #006400; } /* 丛林：深绿 */

/* --- 地图弹窗调整 (适配 20x20) --- */
.big-grid {
    display: grid;
    /* 删除具体的 px 值，改为 100% 撑满容器，由 JS 动态计算 */
    width: 95%;
    aspect-ratio: 1/1; /* 保持正方形 */
    gap: 1px;
    background: #ccc;
    border: 1px solid #999;
}

.map-cell {
    /* 删除固定宽高，改为自动 */
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    /* 20x20 格子较多，字号调小 */
    font-size: 9px; 
    font-weight: bold;
    background: #fff; /* 默认白色背景 */
    overflow: hidden; /* 防止字溢出 */
}

/* 玩家位置高亮 */
.map-cell.player {
    border: 1px solid red;
    background: #fff !important;
    color: red !important;
    z-index: 2;
}
.map-cell.fog {
    background: #eee !important;
    color: transparent;
}



.modal-footer {
    padding: 10px;
    text-align: center;
    background: #f9f9f9;
    color: #666;
    font-size: 12px;
    cursor: pointer;
    border-top: 1px solid #ddd;
}

.map-controls {
    display: flex;
    justify-content: space-around;
    padding: 10px;
    background: #f9f9f9;
}
.map-controls button {
    background: #fff;
    border: 1px solid #ccc;
    padding: 5px 10px;
    font-size: 12px;
    border-radius: 3px;
}

/* --- 新增：视图切换 --- */
.hidden { display: none !important; }
.view-container { padding: 5px; }
.view-title { font-weight: bold; padding-bottom: 5px; border-bottom: 2px solid #ddd; margin-bottom: 10px; }

/* 列表样式 (背包/合成) */
.list-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px; border-bottom: 1px solid #eee; background: #fff;
    margin-bottom: 4px; border-radius: 4px;
}
.list-item button {
    background: #3498db; color: white; border: none; padding: 4px 8px; border-radius: 2px;
}

/* --- 新增：昼夜系统 (Night Mode) --- */
body.night-mode {
    background-color: #000; /* 外部背景全黑 */
}
body.night-mode .app-container {
    background-color: #1a1a1a; /* APP背景深灰 */
    color: #ccc;
}
body.night-mode .content-area, 
body.night-mode .log-area,
body.night-mode .control-panel,
body.night-mode .bottom-nav,
body.night-mode .grid-btn,
body.night-mode .modal-content, 
body.night-mode .map-cell {
    background-color: #2a2a2a; /* 组件背景 */
    color: #bbb;
    border-color: #444;
}
/* 夜晚的特殊文字颜色 */
body.night-mode .loc-info span { color: #ccc; }
body.night-mode .season-bar { background: #222; }
body.night-mode .map-cell.fog { background: #111 !important; } /* 夜晚迷雾更黑 */



/* --- 制作列表优化 --- */
.list-item {
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    padding: 10px; 
    border-bottom: 1px solid #eee; 
    background: #fff;
    margin-bottom: 6px; 
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

/* 按钮美化 */
.list-item button {
    background: #3498db; 
    color: white; 
    border: none; 
    padding: 6px 12px; 
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: background 0.2s;
}
.list-item button:active {
    background: #2980b9;
}

/* 背包空状态 */
#inventory-list:empty::before, #craft-list:empty::before {
    content: "暂无内容";
    display: block;
    text-align: center;
    color: #999;
    padding: 20px;
}


/* --- 理智颜色 --- */
.stat-sanity { color: #8e44ad; } /* 紫色代表理智 */

/* --- 战斗界面样式 --- */
.combat-arena {
    display: flex;
    flex-direction: column;
    height: 100%;
    background: #fff0f0; /* 淡淡的红色背景 */
    padding: 10px;
    border: 2px solid #c0392b;
    border-radius: 8px;
}

/* 夜晚战斗背景变黑 */
body.night-mode .combat-arena {
    background: #2c0505; /* 深红黑 */
    border-color: #7f0000;
}

.enemy-box {
    text-align: center;
    margin-bottom: 15px;
    padding: 10px;
    background: rgba(0,0,0,0.05);
    border-radius: 5px;
}
.enemy-title { font-size: 18px; font-weight: bold; color: #c0392b; margin-bottom: 5px; }

/* 血条 */
.hp-bar-bg { width: 100%; height: 10px; background: #ddd; border-radius: 5px; overflow: hidden; }
.hp-bar-fill { width: 100%; height: 100%; background: #e74c3c; transition: width 0.3s; }

.combat-log {
    flex: 1;
    border: 1px solid #ccc;
    background: #fff;
    padding: 8px;
    overflow-y: auto;
    font-size: 12px;
    margin-bottom: 10px;
    height: 150px;
}
body.night-mode .combat-log { background: #333; color: #ccc; border-color: #555; }

.player-actions { display: flex; gap: 10px; }
.player-actions button { flex: 1; padding: 12px; font-size: 14px; font-weight: bold; border: none; border-radius: 4px; cursor: pointer; }
.atk-btn { background: #c0392b; color: white; }
.flee-btn { background: #95a5a6; color: white; }

/* 受击震动动画 */
@keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    20% { transform: translate(-3px, 0px) rotate(1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    40% { transform: translate(1px, -1px) rotate(1deg); }
    50% { transform: translate(-1px, 2px) rotate(-1deg); }
    60% { transform: translate(-3px, 1px) rotate(0deg); }
    70% { transform: translate(3px, 1px) rotate(-1deg); }
    80% { transform: translate(-1px, -1px) rotate(1deg); }
    90% { transform: translate(1px, 2px) rotate(0deg); }
    100% { transform: translate(1px, -2px) rotate(-1deg); }
}
.shake { animation: shake 0.5s; }


/* --- 1. 夜晚模式特殊样式 --- */

/* 夜晚模式下，按钮文字整体变亮，但怪物按钮特殊处理 */
body.night-mode .grid-btn {
    color: #ccc;
    border-color: #555;
    background: #333;
}

/* 关键修改：夜晚模式下，怪物按钮文字变红 */
body.night-mode .grid-btn.mob {
    color: #ff4d4d !important; /* 鲜艳的红色 */
    border-color: #e74c3c;
    background: #2c0505; /* 深红背景 */
    font-weight: bold;
    box-shadow: 0 0 5px rgba(231, 76, 60, 0.5); /* 添加红色光晕 */
}


/* --- 2. 战斗界面布局调整 (固定按钮) --- */

/* 确保战斗容器撑满可用空间 */
#combat-view {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.combat-arena {
    /* 之前的样式 */
    display: flex;
    flex-direction: column;
    height: 100%; /* 确保占满容器高度 */
    /* ...其他背景边框样式保持不变... */
    padding: 10px;
    box-sizing: border-box; /* 确保 padding 不会撑破容器 */
}

/* 敌人信息区域固定 */
.enemy-box {
    flex-shrink: 0; /* 不允许缩小 */
    /* ...其他样式保持不变... */
}

/* 战斗日志区域：关键修改 */
.combat-log {
    /* 移除固定高度 height: 150px; */
    flex: 1; /* 让日志区域占据剩余的所有空间 */
    overflow-y: auto; /* 内容过多时出现滚动条 */
    min-height: 100px; /* 设置一个最小高度 */
    margin-bottom: 10px;
    /* ...其他边框背景样式保持不变... */
}

/* 底部按钮区域固定 */
.player-actions {
    flex-shrink: 0; /* 不允许缩小 */
    /* ...其他 flex gap 样式保持不变... */
}

/* 地狱地形颜色 */
.map-cell.bg-NETHER { color: #800000; background: #300; } /* 暗红 */
.map-cell.bg-CRIMSON { color: #DC143C; background: #400; } /* 鲜红 */
.map-cell.bg-SOUL { color: #778899; background: #222; }    /* 灵魂沙灰 */
.map-cell.bg-LAVA { color: #FF4500; background: #410; }    /* 岩浆橘 */


/* --- 新增：物品像素图标样式 --- */

/* 修改原有的 grid-btn，使其支持弹性布局，方便图标和文字对齐 */
.grid-btn {
    display: inline-flex; /* 改为内联弹性盒子 */
    align-items: center;  /* 垂直居中对齐 */
    gap: 6px;             /* 图标和文字之间的间距 */
    padding: 6px 12px;    /*稍微调整padding以适应图标*/
}

/* 像素图标的专用样式 */
.item-icon {
    width: 20px;  /* 设置图标大小 */
    height: 20px;
    /* 核心属性：让浏览器用像素化的方式渲染图片，保持清晰的锯齿感 */
    image-rendering: pixelated; 
    image-rendering: -moz-crisp-edges; /* 火狐浏览器兼容 */
    border-radius: 2px; /* 稍微一点点圆角，看起来不那么生硬 */
}
